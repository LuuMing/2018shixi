<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>there are many books </title>
<link rel="stylesheet" href="resources/css/bootstrap.min.css" >
<link rel="stylesheet" href="resources/css/font-awesome.min.css" >
</head>
<body>



<div id="app" class="container-fluid" style="padding:0 2px 0 2px;" >


	<nav>
	  <ol class="breadcrumb">
	    <li class="breadcrumb-item">书目信息</li>
	  </ol>
	</nav>
	
	
	
	
	

	<table class="table table-sm table-hover">
	 
	 	<thead>
	 		<tr>
	 			<th>选择</th>
	 			<th>书目编号</th>
	 			<th style="width:200px;">书目名称</th>
	 			<th>书目作者</th>
	 			<th>书目图片</th>
	 			<th>操作</th>
	 		</tr>
	 	
	 	</thead>
	 	
	 	<tbody>
	 	
	 		<tr v-for="book in books">
	 			<td class="align-middle"><input type="checkbox" v-model="ids" :value="book.id" /></td>
	 			<td class="align-middle">{{book.id}}</td>
	 			<td class="align-middle">{{book.name}}</td>
	 			<td class="align-middle">{{book.author}}</td>
	 			<td class="align-middle"><img :src="'resources/images/books/'+book.books_images" style="width:50px;" /></td>
	 			<td class="align-middle">
	 				<a href="#"  @click="booksUpdTo(books)" >修改</a>
	 				<a href="#"  >删除</a>
	 			</td>
	 		</tr>
	 		
	 		
	 	</tbody>
	
	</table>
	
	
	
	<!-- 修改窗口的内容 -->
	<div  style="display: none;padding:15px;" >
		<form ref="updform">
		  <div class="form-group">
		    <label for="goods-upd-id">书目名称</label>
		    <input  name="g_id" type="number" readonly="readonly" class="form-control" id="goods-upd-id" >		   
		  </div>
		  <div class="form-group">
		    <label for="goods-upd-name">书目作者</label>
		    <input  name="g_name" type="text" class="form-control" id="goods-upd-name" >		   
		  </div>
		
		  <div class="form-group">
		    <label for="goods-upd-img">商品图片</label>
		    <img :src="'resources/images/books/'+book.books_images" style="width:50px;"/>
		    <input name="g_img" type="file" class="form-control-file" id="goods-upd-img" >		   
		  </div>
		  
		  
		  <button  type="button" class="btn btn-primary">提交</button>
		</form>	
	</div>
	

</div>

<!-- 在body结尾之前引入以下js文件。 注意导入顺序不可以随意改变。 -->
<script src="resources/js/jquery.min.js" ></script>
<script src="resources/js/bootstrap.bundle.min.js"></script>
<script src="resources/layer/layer.js" ></script>
<script src="resources/js/sweetalert.min.js" ></script>
<script src="resources/js/vue.min.js"></script>
<script src="resources/js/my.js"></script>

<script type="text/javascript">
new Vue({
	
	el:'#app',
	
	data:{
		//绑定查询
		
		
		books:[],
		
		ids:[],
		
		dlg:null,
		
		
		
	},
	

	
	//定义Vue对象的实例方法
	methods:{
	
		
		
		loadBookList(){
			My.loadData(
					{
						url:'loadBookList'
					},
					
					(data) => { //处理服务器数据的回调函数
						this.books=data;
					}
			);
		},//加载分类信息-end
		
		
		//弹出修改窗体-start
		booksUpdTo(books){
			
			My.loadData({
				url:'loadBookList'
			},
			(data)=>{
				
				this.books=data;
				this.updbooks=books;
				this.dlg=My.open({
					title:'修改商品信息',
					contentId:'books-win-upd'					
					
				});
			});
			
			
		},
		//弹出修改窗体-end
		
		//执行修改-start
		booksUpdDo(){
			var param = new FormData(this.$refs.updform);
			My.operateMultipartData(
					{
						title:'您确实要修改该商品信息吗？',
						text:'如果。。。。，则。。。。。！',
						url:'booksUpdDo',
						data:param
					},
					
					() => {
						this.BookList();
						My.close(this.dlg);
					}
			
			);
		},
		//执行修改-end
		
	},
	mounted(){
		this.loadBookList();
	}
		
	
});

  
</script>

</body>
</html>